<div class="max-w-4xl mx-auto bg-white/40 backdrop-blur-md border border-gray-300 rounded-3xl shadow-xl p-8 mt-8">

  <!-- Titre -->
  <h2 class="text-xl font-bold text-gray-800 mb-6 text-center tracking-wide uppercase">
    ğŸ¯ Rechercher une Session de Jeu
  </h2>

  <!-- Formulaire -->
<div class="creation-form max-w-2xl mx-auto space-y-6">

    <!-- Date dÃ©but -->
  <!-- Formulaire vertical -->
<!-- Formulaire vertical stylisÃ© -->
<div class="max-w-xl mx-auto p-6 bg-white/80 backdrop-blur rounded-2xl shadow-lg space-y-6">

  <!-- Date dÃ©but -->
  <div>
    <label for="dateDebut" class="block text-sm font-medium text-gray-700 mb-1">ğŸ“… Date dÃ©but</label>
    <input
      type="date"
      id="dateDebut"
      [(ngModel)]="dateDebut"
      name="dateDebut"
      [min]="today"
      class="w-full rounded-lg border border-gray-300 px-4 py-3 bg-white shadow-sm focus:ring-2 focus:ring-gray-500 focus:outline-none transition"
    />
  </div>

  <!-- Date fin -->
  <div>
    <label for="dateFin" class="block text-sm font-medium text-gray-700 mb-1">ğŸ“… Date fin</label>
    <input
      type="date"
      id="dateFin"
      [(ngModel)]="dateFin"
      name="dateFin"
      [min]="today"
      class="w-full rounded-lg border border-gray-300 px-4 py-3 bg-white shadow-sm focus:ring-2 focus:ring-gray-500 focus:outline-none transition"
    />
  </div>

  <!-- Type de match -->
  <div>
    <label for="type" class="block text-sm font-medium text-gray-700 mb-1">ğŸ… Type de match</label>
    <select
      id="type"
      [(ngModel)]="type"
      name="typeMatch"
      class="w-full rounded-lg border border-gray-300 px-4 py-3 bg-white shadow-sm focus:ring-2 focus:ring-gray-500 focus:outline-none transition"
    >
      <option value="">-- Choisir --</option>
      <option value="foot">Football</option>
      <option value="hand">Handball</option>
    </select>
  </div>

  <!-- Boutons -->
  <div class="flex justify-end gap-4 pt-4">
    <button
      (click)="searchMatchs()"
      class="bg-gray-800 text-white px-6 py-3 rounded-lg font-semibold tracking-wide hover:bg-black transition shadow-md"
    >
      ğŸ” Rechercher
    </button>
    <button
      (click)="loadAllMatches()"
      class="bg-white text-gray-700 border border-gray-400 px-6 py-3 rounded-lg font-semibold tracking-wide hover:bg-gray-100 transition shadow"
    >
      ğŸ” RÃ©initialiser
    </button>
  </div>
</div>


  <hr />

<!-- RÃ©sultats disponibles -->
<div *ngIf="resultatsDisponibles === true && match.length > 0" 
     class="max-w-4xl mx-auto bg-gray-100/20 backdrop-blur-md border border-gray-300 rounded-3xl shadow-xl p-8 mt-8">
  
  <h3 class="text-lg font-semibold text-gray-800 mb-6 text-center tracking-wide uppercase">
    ğŸ“‹ RÃ©sultats disponibles
  </h3>

  <div *ngFor="let session of match" class="session-card space-y-2 p-4 border border-gray-300 rounded-xl bg-gray-50/10 shadow-sm">
    <p>ğŸ—“ï¸ {{ session.startDate | date:'fullDate' }} de {{ session.startDate | date:'shortTime' }} Ã  {{ session.endDate | date:'shortTime' }}</p>
    <p>ğŸŸï¸ Terrain : {{ getNomTerrain(session.idTerrain!) }}</p>

<!-- Affichage du type de match avec emoji -->
  <label for="type" class="">
    {{ type === 'foot' ? 'âš½' : type === 'hand' ? 'ğŸ¤¾' : '' }} Type Match : {{ type || '' }}
  </label>

<div class="flex items-center space-x-2 w-full max-w-sm">
  <img
    *ngIf="session.equipe1?.logo"
    [src]="session.equipe1.logo"
    alt="Logo Ã©quipe 1"
    class="w-8 h-8 rounded-full object-cover"
  />
  <span>
    Ã‰quipe 1 : {{ getNomEquipe(session.idEquipe1) }}
    &nbsp;&nbsp;
    <strong>{{ session.joueurInscrit1 }}</strong> / {{ session.joueurMax }}
  </span>
</div>

<div class="flex items-center space-x-2 w-full max-w-sm">
  <img
    *ngIf="session.equipe2?.logo"
    [src]="session.equipe2.logo"
    alt="Logo Ã©quipe 2"
    class="w-8 h-8 rounded-full object-cover"
  />
  <span>
    Ã‰quipe 2 : {{ getNomEquipe(session.idEquipe2) }}
    &nbsp;&nbsp;
    <strong>{{ session.joueurInscrit2 }}</strong> / {{ session.joueurMax }}
  </span>
</div>

    <p>ğŸ… Score {{ getNomEquipe(session.idEquipe1) }} : {{ session.scoreEquipe1 ?? 0 }}</p>
    <p>ğŸ… Score {{ getNomEquipe(session.idEquipe2) }} : {{ session.scoreEquipe2 ?? 0 }}</p>

    <div class="buttons flex gap-4 mt-4">
      <button class="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-black transition" (click)="rejoindre(session)">
        âœ… Rejoindre 
      </button>

  <button
  class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition"
  [ngClass]="{
    'cursor-not-allowed opacity-60': session.joueurInscrit1 >= 11 || session.joueurInscrit2 >= 11
  }"
  [title]="(session.joueurInscrit1 >= 11 || session.joueurInscrit2 >= 11) ? 'Ã‰quipe complÃ¨te' : ''"
  (click)="(session.joueurInscrit1 >= 11 || session.joueurInscrit2 >= 11) ? null : openDetails(session)"
>
  ğŸ‘¥ Choix Ã©quipe
</button>
    </div>
  </div>

</div>


<!-- Aucun rÃ©sultat trouvÃ© -->
<div *ngIf="resultatsDisponibles === false" class="max-w-2xl mx-auto text-center mt-8 text-red-600 font-medium">
  â— Aucune session trouvÃ©e.
</div>


<!-- POPUP CHOIX Ã‰QUIPE CENTRÃ‰ -->
<div *ngIf="openPopUp"
     id="popup-container"
     class="fixed inset-0 z-50 flex items-center justify-center">

  <div class="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md space-y-6 border border-gray-300">

    <h3 class="text-lg font-semibold text-gray-800 text-center">ğŸ‘¥ Choix d'une Ã©quipe</h3>

    <p class="text-sm text-gray-600 text-center">SÃ©lectionnez une Ã©quipe Ã  rejoindre :</p>

    <!-- Options d'Ã©quipe -->
    <!-- POPUP CHOIX Ã‰QUIPE sans arriÃ¨re-plan gris -->
<!-- Popup simple sans arriÃ¨re-plan gris -->
<div *ngIf="openPopUp" class="popup-content bg-white rounded-2xl border border-gray-300 shadow-xl p-6 max-w-md mx-auto mt-8">


  <div class="">
    <label class="flex items-center gap-3 cursor-pointer">
      <input type="checkbox" [(ngModel)]="choixEquipe1" (change)="choixEquipe2 = false" class="w-5 h-5 accent-gray-800" />
      {{ getNomEquipe(sessionSelectionnee.idEquipe1) || 'Ã‰quipe 1' }}
    </label>

    <label class="flex items-center gap-3 cursor-pointer">
      <input type="checkbox" [(ngModel)]="choixEquipe2" (change)="choixEquipe1 = false" class="w-5 h-5 accent-gray-800" />
      {{ getNomEquipe(sessionSelectionnee.idEquipe2) || 'Ã‰quipe 2' }}
    </label>
  </div>

  <div class="flex justify-end gap-4 mt-6">
    <button (click)="closePopup()" class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition">âŒ Annuler</button>
    <button (click)="confirmerRejoindre(); closePopup()" 
            [disabled]="!choixEquipe1 && !choixEquipe2" 
            class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition">
      âœ… Confirmer
    </button>
  </div>
</div>

